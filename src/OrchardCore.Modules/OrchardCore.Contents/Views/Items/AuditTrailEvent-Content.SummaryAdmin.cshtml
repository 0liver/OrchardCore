@model AuditTrailEventViewModel
@using OrchardCore.AuditTrail.ViewModels
@using OrchardCore.ContentManagement
@using OrchardCore.Contents.AuditTrail.Extensions
@using OrchardCore.Contents.AuditTrail.Models
@using OrchardCore.Contents.AuditTrail.Providers
@inject IStringLocalizer<ViewContext> S;

@{
    var contentEvent = Model.Event.As<AuditTrailContentEvent>();
    var contentItem = contentEvent.ContentItem;
    var versionNumber = contentEvent.VersionNumber;
    var versionText = S["Version {0}", versionNumber];
    var eventName = Model.Descriptor.LocalizedName.Value.ToLowerInvariant();
    var editForLink = await Orchard.EditForLinkAsync(contentItem.DisplayText, contentItem);
}

@if (Model.Event.Name == ContentAuditTrailEventProvider.Restored)
{
    @T["The {0} {1} was restored as {2}",
    contentItem.ContentType,
    editForLink,
    Html.ActionLink(versionText, "Display", "Content",
    new
    {
        area = "OrchardCore.Contents",
        auditTrailEventId = Model.Event.EventId,
        versionNumber = versionNumber
    }, null)]
}
else if (Model.Event.Name == ContentAuditTrailEventProvider.Removed)
{
    @T["The {0} <strong>{1}</strong> was {2}.",
    contentItem.ContentType,
    contentItem.DisplayText,
    eventName]
}
else
{
    @T["{0} of the {1} {2} was {3}",
    Html.ActionLink(versionText, "Display", "Content",
    new
    {
        area = "OrchardCore.Contents",
        auditTrailEventId = Model.Event.EventId,
        versionNumber = versionNumber
    }, null),
    contentItem.ContentType,
    editForLink,
    eventName]
}

@model AuditTrailEventViewModel
@using OrchardCore.AuditTrail.ViewModels
@using OrchardCore.ContentManagement
@using OrchardCore.Contents.AuditTrail.Models

@{
    var auditTrailEvent = Model.AuditTrailEvent;
    var auditTrailContentEvent = auditTrailEvent.As<AuditTrailContentEvent>();
    var contentItem = auditTrailContentEvent.ContentItem;
    var versionNumber = auditTrailContentEvent.VersionNumber;
    var latestVersionId = ((IShape)Model).GetProperty<string>("LatestVersionId");
}

<a asp-action="Detail" asp-controller="Admin" asp-route-auditTrailEventId="@auditTrailEvent.AuditTrailEventId">@T["Details"]</a>
@if (contentItem != null && contentItem.ContentItemVersionId != latestVersionId)
{
    <form>
        <a asp-route-area="OrchardCore.Contents"
           asp-controller="Content"
           asp-action="Restore"
           asp-route-auditTrailEventId="@auditTrailEvent.AuditTrailEventId"
           data-title="@T["Restore to Version"]"
           data-message="@T["Are you sure you want to restore to version {0}?", versionNumber]"
           data-ok-text="@T["Yes"]"
           data-cancel-text="@T["No"]"
           itemprop="UnsafeUrl RemoveUrl">
            @T["Restore"]
        </a>
    </form>
}
